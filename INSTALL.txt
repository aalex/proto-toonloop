=======================================================
 Toonloop Installation Notes for Ubuntu GNU/Linux 8.10
=======================================================

Install Dependencies
--------------------
Toonloop relies on python packages such as Pygame, Twisted, PyOpenGL 
and pyliblo. Those packages in turn rely on C libraries such as SDL, liblo, 
libpng, libjpeg, libportmidi, and others. Toonloop also uses the mencoder 
software. Some of those packages, libraries and software can be installed using
the apt-get command line utility on Ubuntu or Debian GNU/Linux. Some other 
tools must be installed using subversion or from a compressed archive 
downloaded from the Internet, since we need some of their latest features. 

Dependencies ::

  sudo apt-get install automake libtool git-core subversion wget mercurial imagemagick python-twisted python-numpy python-opengl python-pyglew python-dev python-docutils python-setuptools libsdl1.2-dev libsdl-image1.2-dev libsdl-mixer1.2-dev libsdl-ttf2.0-dev libsdl-gfx1.2-dev  libsdl-sound1.2-dev libsmpeg-dev libpng12-dev libjpeg-dev libportmidi-dev libtiff4-dev mencoder libportmidi-dev

Install Pygame 1.9
------------------
Actually, the easiest way to install pygame version 1.9 or later is to use the debian package. One can be found on the http://bitbucket.org/aalex/toonloop1/downloads/ page. Simply download it and gdebi should install it for you.

If you want to do it the hard way, you can build Pygame from the source. Here is how. The camera module for pygame is available from pygame's svn revision 
1744 or greater::

  mkdir -p ~/src
  pushd ~/src
  svn checkout svn://seul.org/svn/pygame/trunk pygame
  pushd pygame 
  python setup.py build
  sudo python setup.py install --prefix=/usr/local
  popd
  popd

If you prefer, you can get a Pygame release version 1.9 or more recent::

  mkdir -p ~/src
  pushd ~/src
  wget http://pygame.org/ftp/pygame-1.9.1release.tar.gz
  tar -zxf pygame-1.9.1release.tar.gz
  cd pygame-1.9.1release 
  python setup.py build
  sudo python setup.py install --prefix=/usr/local
  popd

Install pyliblo (not mandatory) 
-------------------------------
If you are using Ubuntu version 9.04 or more recent, you can simply install the liblo-dev and the python-liblo package::

  sudo apt-get install liblo-dev python-liblo

If using an old version of Ubuntu, install liblo from source. The version that comes with in the GNU/Linux Ubuntu 8.10 package hangs when starting the server. Liblo is a library that implements the OSC protocol. See http://liblo.sourceforge.net/ for more information on liblo. 

Here is how to install liblo from sources ::

  mkdir -p ~/src
  pushd ~/src
  git clone git://gitorious.org/liblo/mainline liblo
  pushd liblo
  ./autogen.sh
  make
  sudo make install
  popd
  popd

Here is how to install pyliblo from sources. See http://das.nasophon.de/pyliblo/ for more infos. Note that pyliblo has a Debian package.::

  mkdir -p ~/src
  pushd ~/src
  wget http://das.nasophon.de/download/pyliblo-0.8.0.tar.gz
  tar -zxvf pyliblo-0.8.0.tar.gz
  pushd pyliblo-0.8.0/
  python setup.py  build
  sudo python setup.py install --prefix=/usr/local
  popd
  popd

Checkout and Run ToonLoop
-------------------------
The easiest way to install Toonloop is to use the debian package. You can find it on the http://bitbucket.org/aalex/toonloop1/downloads/ page. Simply download it with your web browser, and the package manager should ask you if you want to install it. 

If you want to do it the hard way, here is how to build and install Toonloop from the sources. 

Check it out using Subversion::

  mkdir ~/src
  cd ~/src
  hg clone https://bitbucket.org/aalex/toonloop1 toonloop
  cd toonloop

ToonLoop should now run::

  cd ~/src/toonloop
  ./toonloop

You can install it to your computer if you want.::

  python setup.py build
  sudo python setup.py develop --prefix=/usr/local

This way you can run it by simply issuing "toonloop" in your terminal. 
See also the setup.py file for more installation options.
If you want a permanent installation, issu the following command and erase the sources.::

  sudo python setup.py develop --prefix=/usr/local --uninstall
  sudo python setup.py install --prefix=/usr/local

Actually, there is also a Makefile, which not only installs ToonLoop to
/usr/local, but also installs the Gnome Desktop icon in the 
"Applications/Other" menu and a man page. This is still experimental::
 
  sudo apt-get install help2man
  sudo make install

Additional Configuration Notes
------------------------------

You might need to properly configure your V4L2 video device::

  sudo apt-get install ivtv-utils
  v4l2-ctl --set-input=1
  v4l2-ctl --set-standard=ntsc
  v4l2-ctl --set-fmt-video=width=768,height=480
  v4l2-ctl --set-ctrl=saturation=65535,contrast=32768

If you use two displays, you might want to use 2 separate X screens::

  sudo nvidia-settings
  DISPLAY=:0.1 ./toonloop.py
